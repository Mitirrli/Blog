<!DOCTYPE html>
<html>
  <head>
  <title>
      
          Clean code - Mitirrli
      
  </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="" />
  <link rel="shortcut icon" type="image/x-icon" href="/img/">

  
  
  
  
  
  <link rel="stylesheet" href="https://mitirrli.github.io/blog/style.min.6f642c5866835106e8a19b94463576436c99be9e41a8714ab3df3daa95f6bf90.css" integrity="sha256-b2QsWGaDUQbooZuURjV2Q2yZvp5BqHFKs989qpX2v5A=">
  
  
  
  <link rel="stylesheet" href="https://mitirrli.github.io/blog/style-dark.min.0a647fb6c07e04b77b54fa0515d0a683d39ecdb251dba960fe1f966f7ff36fc2.css" media="(prefers-color-scheme: dark)" integrity="sha256-CmR/tsB&#43;BLd7VPoFFdCmg9OezbJR26lg/h&#43;Wb3/zb8I=">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  
  

  <meta property="og:title" content="Clean code" />
<meta property="og:description" content="1. 合并所有元素(使用数组解包) 1 2 3 4 5 6 7  &lt;?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mitirrli.github.io/blog/php/tips/" />
<meta property="article:published_time" content="2020-10-01T11:30:54+08:00" />
<meta property="article:modified_time" content="2020-10-27T17:30:28+08:00" />
<meta itemprop="name" content="Clean code">
<meta itemprop="description" content="1. 合并所有元素(使用数组解包) 1 2 3 4 5 6 7  &lt;?">
<meta itemprop="datePublished" content="2020-10-01T11:30:54+08:00" />
<meta itemprop="dateModified" content="2020-10-27T17:30:28+08:00" />
<meta itemprop="wordCount" content="307">



<meta itemprop="keywords" content="php," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:image" content="https://mitirrli.github.io/blog//img/"/>
<meta name="twitter:title" content="Clean code"/>
<meta name="twitter:description" content="1. 合并所有元素(使用数组解包) 1 2 3 4 5 6 7  &lt;?"/>

  <!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->

  </head>

  <body>
    
  <h1>Clean code</h1>
  <header>
  
  <div class="avatar">
    <img class="avatarMask" src="https://mitirrli.github.io/blog//img/" alt="">
    <a href="https://mitirrli.github.io/blog/"><img class="avatar-border" src="https://mitirrli.github.io/blog//img/avatar-border.svg" alt=""></a>
  </div>
  
  <h2><a class="author" href="https://mitirrli.github.io/blog/"></a></h2>
</header>

  
  
  
  <p class="date">October 1, 2020</p>
  
  
  
  <div id="tags">
    <ul>
      
        
        
          <li><a href="https://mitirrli.github.io/blog/tags/php/">php</a></li>
        
      
    </ul>
  </div>
  
  
  <div id="contentBody">
    <h3 id="1-合并所有元素使用数组解包">1. 合并所有元素(使用数组解包)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

    <span class="nv">$a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nv">$b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>

    <span class="nx">var_dump</span><span class="p">(</span><span class="nx">array_merge</span><span class="p">([</span><span class="nv">$a</span><span class="p">],</span> <span class="nv">$b</span><span class="p">));</span><span class="c1">//php7.4前
</span><span class="c1"></span>    <span class="nx">var_dump</span><span class="p">([</span><span class="nv">$a</span><span class="p">,</span> <span class="o">...</span><span class="nv">$b</span><span class="p">]);</span><span class="c1">//php7.4
</span></code></pre></td></tr></table>
</div>
</div><h3 id="2-null-合并运算符">2. null 合并运算符</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

    <span class="nv">$default</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">;</span>
    <span class="nv">$username</span> <span class="o">=</span> <span class="nv">$default</span> <span class="o">??</span> <span class="s1">&#39;username&#39;</span><span class="p">;</span>

    <span class="nx">var_dump</span><span class="p">(</span><span class="nv">$username</span><span class="p">);</span><span class="c1">//php7.0
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

    <span class="nx">var_dump</span><span class="p">(</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$username</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;hi&#39;</span> <span class="o">:</span> <span class="s1">&#39;username&#39;</span><span class="p">);</span><span class="c1">//php7.0前
</span></code></pre></td></tr></table>
</div>
</div><h3 id="3-空合并运算符赋值">3. 空合并运算符赋值</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

    <span class="nv">$q</span> <span class="o">=</span> <span class="nx">isset</span><span class="p">(</span><span class="nv">$q</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span><span class="c1">//php7.4前
</span><span class="c1"></span>
    <span class="nv">$a</span> <span class="o">??=</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//php7.4
</span><span class="c1"></span>
    <span class="nx">var_dump</span><span class="p">(</span><span class="nv">$q</span><span class="p">);</span>
    <span class="nx">var_dump</span><span class="p">(</span><span class="nv">$a</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="4-可为空nullable类型">4. 可为空(Nullable)类型</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">php7.1后，参数以及返回值的类型现在可以通过在类型前加上一个问号使之允许为空
当启用这个特性时，传入的参数或者函数返回的结果要么是给定的类型，要么是 null
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

    <span class="k">function</span> <span class="nf">test</span><span class="p">(</span><span class="o">?</span><span class="nx">string</span> <span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">var_dump</span><span class="p">(</span><span class="nv">$name</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">test</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">);</span>   <span class="c1">//&#34;test&#34;
</span><span class="c1"></span>    <span class="nx">test</span><span class="p">(</span><span class="k">null</span><span class="p">);</span>     <span class="c1">//null
</span><span class="c1"></span>    <span class="nx">test</span><span class="p">();</span>         <span class="c1">//Uncaught Error: Too few arguments ...
</span></code></pre></td></tr></table>
</div>
</div><h3 id="5-多异常捕获处理">5. 多异常捕获处理</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// some code
</span><span class="c1"></span>    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception1</span> <span class="o">|</span> <span class="nx">Exception2</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="6-list-函数">6. list 函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">];</span>

<span class="k">list</span><span class="p">(</span><span class="nv">$fruit</span><span class="p">,</span> <span class="nv">$color</span><span class="p">)</span> <span class="o">=</span> <span class="nv">$arr</span><span class="p">;</span>

<span class="nx">var_dump</span><span class="p">(</span><span class="nv">$fruit</span><span class="p">,</span> <span class="nv">$color</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="c1"># 列出他们的其中一个
</span><span class="c1"></span><span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">];</span>

<span class="k">list</span><span class="p">(,</span> <span class="nv">$color</span><span class="p">)</span> <span class="o">=</span> <span class="nv">$arr</span><span class="p">;</span>

<span class="nx">var_dump</span><span class="p">(</span><span class="nv">$color</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="c1"># php7.1后可以指定键名
</span><span class="c1"></span><span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;val1&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;val2&#39;</span><span class="p">],</span>
<span class="p">];</span>

<span class="k">list</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="o">=</span> <span class="nx">reset</span><span class="p">(</span><span class="nv">$arr</span><span class="p">);</span>
<span class="nx">var_dump</span><span class="p">(</span><span class="nv">$id</span><span class="p">,</span> <span class="nv">$val</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;val1&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;val2&#39;</span><span class="p">],</span>
<span class="p">];</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$arr</span> <span class="k">as</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">])</span> <span class="p">{</span>
    <span class="nx">var_dump</span><span class="p">(</span><span class="nv">$id</span><span class="p">,</span> <span class="nv">$val</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="7-箭头函数">7. 箭头函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
    <span class="c1">//php7.4前
</span><span class="c1"></span>    <span class="nv">$demo1</span> <span class="o">=</span> <span class="nx">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$val</span><span class="p">){</span>
        <span class="k">return</span> <span class="nv">$val</span> <span class="o">*</span> <span class="nv">$val</span><span class="p">;</span>
    <span class="p">},</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]);</span>

    <span class="c1">//php7.4后
</span><span class="c1"></span>    <span class="nv">$demo2</span> <span class="o">=</span> <span class="nx">array_map</span><span class="p">(</span><span class="nx">fn</span><span class="p">(</span><span class="nv">$val</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">$val</span> <span class="o">*</span> <span class="nv">$val</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="8-取出数组中的元素">8. 取出数组中的元素</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

    <span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;zx&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ZX&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;as&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AS&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;qw&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;QW&#39;</span><span class="p">],</span>
    <span class="p">];</span>

    <span class="c1"># 如何快速取出二维数组对于id的值
</span><span class="c1"></span>    <span class="nx">var_dump</span><span class="p">(</span><span class="nx">array_column</span><span class="p">(</span><span class="nv">$arr</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">));</span>
</code></pre></td></tr></table>
</div>
</div>
  </div>
  <footer>
  <p>
  &copy;  .
  Powered by <a href="https://gohugo.io/">Hugo</a>
  using the <a href="https://github.com/koirand/pulp/">pulp</a> theme.
  </p>
</footer>


  </body>
</html>
